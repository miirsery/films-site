{"version":3,"sources":["js/cart.js"],"names":["itemsBtn","document","querySelectorAll","favoriteList","querySelector","itemsBtnImgDisable","favoriteShowListBtn","favorite","deleteBtn","randomId","Math","random","toString","substring","filmsList","generateCartProduct","img","title","id","description","removeFilm","filmParent","remove","forEach","el","closest","setAttribute","addEventListener","e","preventDefault","itemsBtnImg","self","currentTarget","parent","dataset","getAttribute","textContent","replace","trim","slice","push","localStorage","setItem","JSON","stringify","style","display","insertAdjacentHTML","removeProduct","console","log","childElementCount","classList","contains","arg","arg2","target","transform","setTimeout"],"mappings":"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","file":"cart.c18a2f96.js","sourceRoot":"..","sourcesContent":["const itemsBtn = document.querySelectorAll('.content__favorite-btn');\r\nconst favoriteList = document.querySelector('.favorite-modal__list');\r\nconst itemsBtnImgDisable = document.querySelectorAll('.content__favorite-img-disable');\r\nconst favoriteShowListBtn = document.querySelector('.favorite-btn');\r\nconst favorite = document.querySelector('.favorite');\r\nconst deleteBtn = document.querySelector('.favorite-modal__item-delete');\r\n// console.log(itemsBtn);\r\n// const warningBtn = document.querySelector('.favorite-modal__warning');\r\nconst randomId = () => {\r\n    return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\r\n};\r\n\r\nlet filmsList = []\r\n\r\nconst generateCartProduct = (img, title, id, description) => {\r\n    return `\r\n    <li class=\"favorite-modal__item\" data-id=\"${id}\">\r\n\r\n        <img class=\"favorite-modal__item-img\" src=\"${img}\" alt=\"\">\r\n        <div class=\"favorite-modal-right\">\r\n    <h5 class=\"favorite-modal__item-title\"> ${title}</h5>\r\n    <p class=\"content__description\" style=\"display:block\">${description}</p>\r\n    </div>\r\n    <button class=\"favorite-modal__item-delete\" aria-label=\"Удалить\">\r\n        <img class=\"favorite-modal__img\" src=\"./images/trash.svg\" alt=\"delete\">\r\n    </button>\r\n   \r\n    </li>\r\n\t`;\r\n};\r\n\r\nconst removeFilm = (filmParent) => {\r\n    filmParent.remove();\r\n}\r\n\r\n\r\nitemsBtn.forEach(el => {\r\n    el.closest('.content__link').setAttribute('data-id', randomId());\r\n    el.addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        let itemsBtnImg = el.querySelector('.content__favorite-img');\r\n        let itemsBtnImgDisable = el.querySelector('.content__favorite-img-disable');\r\n        let self = e.currentTarget;\r\n        let parent = self.closest('.content__link');\r\n        let id = parent.dataset.id;\r\n        let img = parent.querySelector('.content__img').getAttribute('src');\r\n        let title = parent.querySelector('.content__title').textContent;\r\n        let description = parent.querySelector('.content__description')\r\n            .textContent\r\n            .replace(/[\\n\\r]+|[\\s]{2,}/g, ' ').trim()\r\n            .slice(0, 120)\r\n            + '...';\r\n        let deleteBtn = document.querySelector('.favorite-modal__item-delete');\r\n\r\n        filmsList.push({\r\n            'id': id,\r\n            'title': title,\r\n            'description': description,\r\n            'img': img\r\n        })\r\n\r\n        localStorage.setItem('films', JSON.stringify(filmsList))\r\n        itemsBtnImg.style.display = (itemsBtnImg.style.display == 'none') ? 'block' : 'none';\r\n        itemsBtnImgDisable.style.display = (itemsBtnImgDisable.style.display == 'block') ? 'none' : 'block';\r\n\r\n        if (itemsBtnImgDisable.style.display == 'block') {\r\n            favoriteList.insertAdjacentHTML('afterbegin', generateCartProduct(\r\n                img,\r\n                title,\r\n                id,\r\n                description));\r\n            removeProduct(itemsBtnImgDisable, itemsBtnImg);\r\n            console.log(favoriteList.childElementCount);\r\n        }\r\n        else {\r\n            itemsBtnImgDisable.style.display = 'none';\r\n            if (deleteBtn.classList.contains('favorite-modal__item-delete')) {\r\n                removeFilm(deleteBtn.closest('.favorite-modal__item'));\r\n                console.log(favoriteList.childElementCount);\r\n            }\r\n        }\r\n    });\r\n});\r\n\r\n\r\n\r\n\r\nfunction removeProduct(arg, arg2) {\r\n    favoriteList.addEventListener('click', (e) => {\r\n        arg.style.display = 'none';\r\n        arg2.style.display = 'block';\r\n        if (e.target.classList.contains('favorite-modal__item-delete')) {\r\n            e.target.style.transform = 'scale(0.8)'\r\n            setTimeout(() => {\r\n                removeFilm(e.target.closest('.favorite-modal__item'));\r\n            }, 100);\r\n\r\n        }\r\n    })\r\n}\r\n// console.log(favoriteList);"]}